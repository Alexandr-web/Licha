!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ACharty=e():t.ACharty=e()}(self,(()=>(()=>{"use strict";var t={d:(e,i)=>{for(var o in i)t.o(i,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:i[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{ACharty:()=>k,Utils:()=>y});const i=(t,e,i)=>{const o=[];if(0===t&&1===Math.abs(e)){let s=0;for(let o=0;o<i;o++)s=(t*o+e*(i-o))/i;for(let i=t;i<=e;i+=s)o.push(i)}else{const s=(e-t)/(i-1);for(let i=t;i<=e;i+=s)o.push(Math.ceil(i))}return o},o=class{constructor(t,e,i,o,s=0,r=1){this.x=t,this.y=e,this.color=i,this.ctx=o,this.rotateDeg=s,this.opacity=r}setColor(t,e,o,s=0,r=0){Array.isArray(this.color)&&this.color.length>1?((t,e,o,s,r,n=0,a=0)=>{const l=r.createLinearGradient(n,e,a,o),h=i(0,1,t.length-1);t.map(((t,e)=>l.addColorStop(h[e],t))),r[s]=l})(this.color,t,e,o,this.ctx,s,r):Array.isArray(this.color)&&1===this.color.length?this.ctx[o]=this.color[0]:"string"==typeof this.color&&(this.ctx[o]=this.color)}},s=class extends o{constructor(t,e,i,o,s,r,n,a,l,h,c){super(t,e,i,o,l,h),this.width=s,this.height=r,this.startY=n,this.endY=a,this.stroke=c||{}}draw(){this.ctx.beginPath(),this.ctx.setLineDash([0,0]),this.ctx.globalAlpha=this.opacity,this.setColor(this.startY,this.endY,"fillStyle"),this.ctx.fillRect(this.x,this.y,this.width,this.height),Object.keys(this.stroke).length&&(this.ctx.lineWidth=this.stroke.width,this.ctx.strokeStyle=this.stroke.color,this.ctx.strokeRect(this.x,this.y,this.width,this.height))}},r=class extends o{constructor(t,e,i,o,s,r,n){super(i,o,s,e,r,n),this.font=t}getSizes(){this.ctx.font=this.font.str;const t=this.ctx.measureText(this.font.text);return{width:t.width,height:t.actualBoundingBoxAscent}}draw(){const{str:t,color:e,text:i}=this.font;this.ctx.save(),this.ctx.globalAlpha=this.opacity,this.ctx.font=t,this.ctx.fillStyle=e,0!==this.rotateDeg?(this.ctx.translate(this.x,this.y),this.ctx.rotate(this.rotateDeg),this.ctx.fillText(i,0,0)):this.ctx.fillText(i,this.x,this.y),this.ctx.restore()}},n=t=>"number"==typeof t&&!isNaN(t),a=(t,e)=>`${e} ${t}px Arial, sans-serif`,l=(t,e,i,o)=>new r({size:t,str:`${e} ${t}px Arial, sans-serif`,text:i},o).getSizes(),h=class{constructor(t,e,i,o,s,r,n,a={},l=[]){this.hideGroups=l,this.theme=a,this.data=e,this.width=o,this.height=s,this.ctx=i,this.type=r,this.title=n||{},this.padding=t,this.defaultPadding=10,this.titleData={font:{text:"",size:null,color:"",weight:null},gapBottom:null,x:null,y:null,width:null,height:null}}getBounds(){const t={width:null,height:null,horizontal:{start:n(this.padding.left)?this.padding.left:this.defaultPadding,end:this.width-(n(this.padding.right)?this.padding.right:this.defaultPadding)},vertical:{start:n(this.padding.top)?this.padding.top:this.defaultPadding,end:this.height-(n(this.padding.bottom)?this.padding.bottom:this.defaultPadding)}};return t.width=t.horizontal.end-t.horizontal.start,t.height=t.vertical.end-t.vertical.start,t}drawTitle(){if(!Object.keys(this.title).length)return this;const{weight:t=600,size:e,text:i,color:o=this.theme.color}=this.title.font,s={color:o,text:i,str:a(e,t)},n=l(e,t,i,this.ctx),h=this.getBounds(),c=h.horizontal.start,g={x:c+(h.horizontal.end-n.width-c)/2,y:h.vertical.start+n.height};return new r(s,this.ctx,g.x,g.y).draw(),this.titleData=Object.assign(Object.assign(Object.assign({},this.title),g),n),this}getGapsForYPoints(t,e,i,o){const{gaps:s={},totalHeight:r=0}=o,{showText:n=Boolean(Object.keys(e.font).length)}=e.font,a=(s.legend||{}).bottom||0,l=(t.titleData||{}).height||0,h=(t.titleData||{}).gapRight||0,c=(i||{}).y||0,g=(i||{}).gapBottom||0,d=(e.titleData||{}).height||0,p=(e.titleData||{}).gapTop||0,u=e.rotate?e.getMaxWidthTextPoint():e.getMaxHeightTextPoint();return{left:l+h,top:c+g+r+a,bottom:(n?e.gapTopAxisX+u:0)+d+p}}getGapsForXPoints(t,e){const{font:i={},titleData:o={},gapRightAxisY:s}=t,{font:r={},titleData:n={}}=e,a=e.getIgnoreNames(),h=t.getAxesData(this.data).names,c=h[h.length-1],g=h[0],{weight:d=400,size:p,showText:u=Boolean(Object.keys(r).length)}=r,{showText:F=Boolean(Object.keys(i).length)}=i,x=l(p,d,e.getCorrectName(g).toString(),this.ctx).width,b=u&&!(a||[]).includes(g),C=l(p,d,e.getCorrectName(c).toString(),this.ctx).width,m=u&&!(a||[]).includes(c),D=o.height||0,w=o.gapRight||0,f=n.height||0,B=n.gapTop||0;return{left:(b?x/2:0)+D+w+(F?t.getMaxTextWidthAtYAxis()+s:0),right:m?C/2:0,bottom:f+B}}getGapsForYTitle(t,e,i){const{y:o=0,gapBottom:s=0}=t,{totalHeight:r,gaps:n={}}=e,{title:a={}}=i,{font:h={},gapTop:c=0}=a,{size:g,weight:d=600,text:p}=h,u=l(g,d,p,this.ctx).height||0;return{top:o+((n.legend||{}).bottom||0)+s+r,bottom:u+c}}getGapsForXTitle(t){const{titleData:e={},gapRightAxisY:i}=t,{gapRight:o=0,height:s=0}=e;return{left:s+o+i}}getGapsForLegend(t,e){const{y:i=0,gapBottom:o=0}=e,{font:s={}}=t.title||{},{size:r,weight:n=600,text:a}=s;return{top:i+o,left:l(r,n,a,this.ctx).height||0}}},c=function t(e,i){if(e.length<=1)return e;const o=e[e.length-1],s=[],r=[];for(let t=0;t<e.length-1;t++)(i?e[t][i]<o[i]:e[t]<o)?s.push(e[t]):r.push(e[t]);return[...t(s,i),o,...t(r,i)]},g=class{constructor(t,e,i={},o={},s={},r={},n={}){this.ctx=t,this.title=s,this.font=n,this.bounds=r,this.points=[],this.sortNames=e||"less-more",this.uniqueNames=[],this.uniqueValues=[],this.gapTopAxisX=10,this.gapRightAxisY=10,this.themeForPoint=i,this.themeForTitle=o}getAxesData(t){const e=[],i=[];for(const o in t){const s=t[o].data;i.push(...s.map((({name:t})=>t))),e.push(...s.map((({value:t})=>t)))}const o=[...new Set(i)],s=[...new Set(e)],r=!o.some((t=>isNaN(+t))),n=c(s).reverse(),a=[];if(r)switch(this.sortNames){case"less-more":a.push(...c(o));break;case"more-less":a.push(...c(o).reverse())}return{values:n,names:r?a:o}}},d=class extends g{constructor(t,e,i,o,s,r,n,a,l,h,c=3){super(i,n,l,a,o,s,r),this.step=c,this.editValue=t,this.data=e,this.sortValues=h||"less-more",this.titleData={x:null,y:null,width:null,height:null,font:{text:"",size:null,color:"",weight:null},gapRight:null}}_getCorrectValue(t){return this.editValue instanceof Function?this.editValue(t):t}drawTitle(t){if(!Object.keys(this.title).length)return this;const e=this.bounds,{size:i,text:o,color:s=this.themeForTitle.color,weight:n=600}=this.title.font,h={size:i,text:o,color:s,str:a(i,n)},c=l(i,n,o,this.ctx),g=e.vertical.start+c.width/2+(t.top||0),d=e.vertical.end-(t.bottom||0),p={x:e.horizontal.start+c.height,y:g+(d-g)/2};return new r(h,this.ctx,p.x,p.y,null,Math.PI/180*-90).draw(),this.titleData=Object.assign(Object.assign(Object.assign({},this.title),c),p),this}drawPoints(t){const e=this.getAxesData(this.data).values,o=this.bounds,{size:s,showText:n=Boolean(Object.keys(this.font).length),weight:h=400,color:g=this.themeForPoint.color}=this.font,d=Math.ceil(e[0]),p=Math.floor(e[e.length-1]),u=l(s,h,d.toString(),this.ctx),F=i(Math.min(d,p),Math.max(d,p),this.step),x=[];switch(this.sortValues){case"less-more":x.push(...F.reverse());break;case"more-less":x.push(...F)}return x.includes(p)||x.push(p),x.map(((e,i)=>{const c=l(s,h,this._getCorrectValue(e).toString(),this.ctx),d=o.vertical.start+u.height/2+(t.top||0),p=(o.vertical.end-d-(t.bottom||0))/(x.length-1),F={x:o.horizontal.start+(t.left||0),y:p*i+d},b=Object.assign(Object.assign({},this.font),{color:g,str:a(s,h),text:this._getCorrectValue(e).toString()});this.points.push(Object.assign(Object.assign({onScreen:!0,value:e},c),F)),n&&new r(b,this.ctx,F.x,F.y+c.height/2).draw()})),e.map((t=>{const e=c(this.points,"value").find((({value:e})=>e>=t)),i=c(this.points,"value").reverse().find((({value:e})=>e<=t)),r=l(s,h,t.toString(),this.ctx),a={x:n?o.horizontal.start:0,y:i.y+(t-i.value)*((e.y-i.y)/(e.value-i.value||1))};this.points.find((({value:e})=>e===t))||this.points.push(Object.assign(Object.assign({value:t,onScreen:!1},a),r))})),this.font.showText=n,this}getMaxTextWidthAtYAxis(){return Math.max(...this.points.filter((({onScreen:t})=>t)).map((({width:t})=>t)))}},p=class extends o{constructor(t,e,i,o,s,r,n){super(t,e,i,o),this.lineTo=s,this.width=r||1,this.dotted=n}draw(){this.ctx.setLineDash(this.dotted?[10,20]:[0,0]),this.ctx.beginPath(),this.ctx.moveTo(this.x,this.y),this.ctx.globalAlpha=this.opacity,this.ctx.lineWidth=this.width,this.ctx.lineCap="round",this.lineTo.map((({x:t,y:e})=>{this.setColor(this.y,e,"strokeStyle",this.x,t),this.ctx.lineTo(t,e)})),this.ctx.stroke()}},u=class extends o{constructor(t,e,i,o,s,r,n,a,l){super(e,i,o,s,null,r),this.radius=t,this.stroke=l||{},this.startY=n,this.endY=a}draw(){this.ctx.beginPath(),this.ctx.setLineDash([0,0]),this.ctx.globalAlpha=this.opacity,this.setColor(this.startY,this.endY,"fillStyle"),this.ctx.arc(this.x,this.y,this.radius,2*Math.PI,0),this.ctx.fill(),Object.keys(this.stroke).length&&(this.ctx.lineWidth=this.stroke.width,this.ctx.strokeStyle=this.stroke.color,this.ctx.arc(this.x,this.y,this.radius,2*Math.PI,0),this.ctx.stroke())}},F=class extends o{constructor(t,e,i,o,s,r,n,a,l,h,c){super(e,i,o,r,h,n),this.format=s,this.size=t,this.stroke=c,this.startY=a,this.endY=l}draw(){switch(this.format){case"circle":new u(this.size,this.x,this.y,this.color,this.ctx,this.opacity,this.startY,this.endY,this.stroke).draw();break;case"square":new s(this.x,this.y,this.color,this.ctx,this.size,this.size,this.startY,this.endY,this.rotateDeg,this.opacity,this.stroke).draw()}}},x=class extends o{constructor(t,e,i,o,s,r,n,a){super(t,e,i,o,a),this.lineTo=s,this.startY=r,this.endY=n}draw(){this.ctx.beginPath(),this.ctx.moveTo(this.x,this.y),this.ctx.globalAlpha=this.opacity,this.ctx.lineCap="round",this.lineTo.map((({x:t,y:e})=>this.ctx.lineTo(t,e))),this.setColor(this.startY,this.endY,"fillStyle"),this.ctx.fill()}};function b(t,e,i){const o=t;if(o.length-1>=e)return o[e];for(let t=0;t<i.length&&!(o.length-1>=e);t++)o.push(i[t]);return b(o,e,i)}const C=(t,e=[])=>e.length?t>e.length-1?b([],t,e):e[t]||"":"",m=class extends h{constructor(t,e,i,o,s,r,n,a,l,h,c,g,d={},p={}){super(h,t,r,n,a,"line",l,null,c),this.pointsX=s,this.pointsY=o,this.line=e,this.cap=i,this.sortValues=g||"less-more",this.caps=[],this.themeForLine=d,this.themeForCaps=p}_getStyles(t,e,i){const o=Object.keys(this.data).indexOf(i),s=C(o,this.themeForLine.color),r=C(o,this.themeForLine.fill),n=C(o,this.themeForCaps.color),a=C(o,this.themeForCaps.strokeColor);return{lineStyle:{width:t.width||this.line.width,color:t.color||this.line.color||s,dotted:t.dotted||this.line.dotted,stepped:t.stepped||this.line.stepped,fill:t.fill||this.line.fill||r},capStyle:{size:e.size||this.cap.size,color:e.color||this.cap.color||n,stroke:e.stroke||this.cap.stroke||{},format:e.format||this.cap.format},themeStrokeColorForCap:a}}_getGroupsDataCoordinates(t){return t.map((({value:t,name:e})=>{const i=this.pointsY.find((e=>e.value===t)),o=this.pointsX.find((t=>t.name===e));return{x:o.x,y:i.y,value:i.value,name:o.name}}))}_setFillGroupChart(t,e,i,o){const s=t[0],r=t[t.length-1],n=this.pointsY.filter((({onScreen:t})=>t)),a=n[n.length-1],l=n[0],h={moveTo:{x:s.x,y:s.y},lineTo:[],fill:e,group:o,startY:Math.min(...t.map((({y:t})=>t))),endY:a.y};switch(t.map((({x:e,y:o},s)=>{if(i){const e=t[s+1];if(e){const t=this.pointsY.find((t=>t.value===e.value)),i=this.pointsX.find((t=>t.name===e.name));h.lineTo.push({x:i.x,y:o},{x:i.x,y:t.y})}}else s>0&&h.lineTo.push({x:e,y:o})})),this.sortValues){case"less-more":h.lineTo.push({x:r.x,y:a.y},{x:s.x,y:a.y},h.moveTo);break;case"more-less":h.lineTo.push({x:r.x,y:l.y},{x:s.x,y:l.y},h.moveTo)}new x(h.moveTo.x,h.moveTo.y,h.fill,this.ctx,h.lineTo,h.startY,h.endY).draw()}_drawLinesAndCaps(t,e,i,o,s){const{lineStyle:r,capStyle:n,themeStrokeColorForCap:a}=this._getStyles(i,o,s),l=[];t.map((({value:t,name:i,x:o,y:a},h)=>{const c=e[h+1];if(c){const t=this.pointsY.find((t=>t.value===c.value)),e=this.pointsX.find((t=>t.name===c.name));r.stepped?l.push({x:e.x,y:a},{x:e.x,y:t.y}):l.push({x:e.x,y:t.y})}this.caps.push({group:s,value:t,name:i,x:"circle"===n.format?o:o-n.size/2,y:"circle"===n.format?a:a-n.size/2,stroke:n.stroke,format:n.format,size:n.size,color:n.color})})),new p(t[0].x,t[0].y,r.color,this.ctx,l,r.width,r.dotted).draw(),this.caps.map((({x:t,y:e,color:i,format:o,size:s,stroke:r})=>{new F(s,t,e,i,o,this.ctx,1,"circle"===o?e-s:e-s/2,"circle"===o?e+s:e+s/2,0,{width:r.width||1,color:r.color||a}).draw()}))}draw(){const t=Object.keys(this.data).filter((t=>!this.hideGroups.includes(t))).reduce(((t,e)=>(t[e]=this.data[e],t)),{});for(const e in t){const{data:i,line:o={},cap:s={}}=t[e],{lineStyle:r}=this._getStyles(o,s,e),n=this._getGroupsDataCoordinates(i);(Array.isArray(r.fill)||"string"==typeof r.fill&&r.fill.length)&&this._setFillGroupChart(n,r.fill,r.stepped,e),this._drawLinesAndCaps(n,i,o,s,e)}return this}},D=class extends g{constructor(t,e,i,o,s,r,n,a,l,h,c,g,d={}){super(t,a,c,h,o,s,r),this.rotate=l,this.themeForLine=d,this.ignoreNames=g||[],this.data=e,this.editName=n,this.line=i,this.titleData={x:null,y:null,width:null,height:null,font:{text:"",size:null,color:"",weight:null},gapTop:null}}getIgnoreNames(){return this.ignoreNames instanceof Function?this.getAxesData(this.data).names.filter(this.ignoreNames):Array.isArray(this.ignoreNames)?this.ignoreNames:[]}drawTitle(t){if(!Object.keys(this.title).length)return this;const{size:e,weight:i=600,color:o=this.themeForTitle.color,text:s}=this.title.font,n={size:e,color:o,text:s,weight:i,str:a(e,i)},h=this.bounds,c=l(e,i,s,this.ctx),g=h.horizontal.start+(t.left||0),d={x:g+(h.horizontal.end-c.width-g)/2,y:h.vertical.end};return new r(n,this.ctx,d.x,d.y).draw(),this.titleData=Object.assign(Object.assign(Object.assign({},this.title),c),d),this}getCorrectName(t){return this.editName instanceof Function?this.editName(t):t}drawPoints(t){const e=this.getAxesData(this.data).names,i=this.bounds,o=this.getIgnoreNames(),{size:s,weight:n=400,showText:h=Boolean(Object.keys(this.font).length),color:c=this.themeForPoint.color}=this.font;return e.map(((g,d)=>{const p=i.horizontal.start+(t.left||0),u=(i.horizontal.end-(t.right||0)-p)/(e.length-1),F=l(s,n,`${this.getCorrectName(g)}`,this.ctx),x={x:u*d+p,y:i.vertical.end-(t.bottom||0)};for(const t in this.data){const e=this.data[t].data,i=Object.keys(this.data).indexOf(t),s=C(i,this.themeForLine.color);e.map((e=>{if(e.name===g){const i=this.data[t].line||{};this.points.push(Object.assign(Object.assign({onScreen:!o.includes(g),name:g,color:i.color||(this.line||{}).color||i.fill||(this.line||{}).fill||s,value:e.value,group:t},x),F))}}))}if(h&&!o.includes(g)){const t=Object.assign(Object.assign({},this.font),{color:c,str:a(s,n),text:this.getCorrectName(g).toString()});this.rotate?new r(t,this.ctx,x.x+F.height/2,x.y,null,Math.PI/180*-90).draw():new r(t,this.ctx,x.x-F.width/2,x.y).draw()}})),this.font.showText=h,this}getMaxWidthTextPoint(){const t=this.getAxesData(this.data).names,{size:e,weight:i=400}=this.font,o=t.map((t=>l(e,i,`${this.getCorrectName(t)}`,this.ctx).width));return Math.max(...o)}getMaxHeightTextPoint(){const t=this.getAxesData(this.data).names,{size:e,weight:i=400}=this.font,o=t.map((t=>l(e,i,`${this.getCorrectName(t)}`,this.ctx).height));return Math.max(...o)}},w=class extends o{constructor(t,e,i,o,s,r,n,a,l,h,c,g={},d={},p={},u={},F={}){super(a,l,h,c),this.editValue=t,this.editName=e,this.data=i,this.bounds=o,this.elements=s,this.padding=g,this.titleData=r,this.groupsData=n,this.groupLineWidth=5,this.triangleSizes={height:10,width:15},this.title=s[0].name,this.themeForWindow=d,this.themeForLine=p,this.themeForTitle=u,this.themeForGroup=F,this.defaultTitleFontWeight=600,this.defaultGroupsFontWeight=400}_getCorrectGroupValue(t){return this.editValue instanceof Function?this.editValue(t):t}_getElementsWithSize(){return this.elements.map((({group:t,value:e,color:i})=>{const o=this._getCorrectGroupValue(e),s=`${t}: ${o}`,{font:r}=this.groupsData,{font:n}=this.titleData;return{group:Object.assign({name:s,color:i},l(r.size,r.weight||this.defaultTitleFontWeight,s,this.ctx)),value:Object.assign({name:o.toString()},l(n.size,n.weight||this.defaultGroupsFontWeight,o,this.ctx))}}))}_getCoordinates(){return{x:this.x+this.triangleSizes.height,y:this.y}}_getTopGroupsDistance(t){const{gaps:e}=this.groupsData;return t.reduce(((t,{height:i})=>t+(i+e.bottom)),0)}_drawLines(t,e){const i=this.padding,{x:o}=this._getCoordinates();for(let s=0;s<this.elements.length;s++){const{group:r}=this._getElementsWithSize()[s],n=this._getGroupsCoordinates(s),a=o+e-(i.right||0),l={moveTo:{x:a,y:n.y-r.height},lineTo:[{x:a,y:n.y}]};t&&Object.assign(l,{moveTo:{x:a-(e+2*this.triangleSizes.height),y:n.y},lineTo:[{x:a-(e+2*this.triangleSizes.height),y:n.y-r.height}]}),new p(l.moveTo.x,l.moveTo.y,r.color,this.ctx,l.lineTo,this.groupLineWidth).draw()}}_getTitleSize(){const{font:t}=this.titleData,{size:e,weight:i=this.defaultTitleFontWeight}=t;return l(e,i,this.title.toString(),this.ctx)}_drawTitle(t,e){const i=this.padding,{x:o,y:s}=this._getCoordinates(),n={x:o+(i.left||0),y:s+(i.top||0)+this._getTitleSize().height};t&&(n.x-=e+2*this.triangleSizes.height);const{font:l}=this.titleData,{size:h,color:c=this.themeForTitle.color,weight:g=this.defaultTitleFontWeight}=l,d={color:c,text:this.title.toString(),str:a(h,g)};new r(d,this.ctx,n.x,n.y).draw()}_getGroupsCoordinates(t){const{x:e,y:i}=this._getCoordinates(),{gaps:o={}}=this.titleData,s=this.padding,r=this._getElementsWithSize().filter(((e,i)=>i<=t)),n=this._getTopGroupsDistance(r.map((({group:t})=>t)));return{x:e+(s.left||0),y:i+n+this._getTitleSize().height+(o.bottom||0)}}_drawGroups(t,e){const{font:i}=this.groupsData,{size:o,weight:s=this.defaultGroupsFontWeight,color:n=this.themeForGroup.color}=i;this._getElementsWithSize().map((({group:i},l)=>{const h={text:i.name,color:n,str:a(o,s)},c=this._getGroupsCoordinates(l);t&&(c.x-=e+2*this.triangleSizes.height),new r(h,this.ctx,c.x,c.y).draw()}))}_getMaxContentWidth(t){const e=c(t.map((({group:t})=>t)),"width").reverse()[0].width,i=this._getTitleSize().width;return Math.max(e,i)}_outOfBounds(t){return this._getCoordinates().x+t>this.bounds.width}_getWindowSize(){const t=this.padding,{gaps:e}=this.groupsData,{gaps:i}=this.titleData,o=this._getElementsWithSize().map((({group:t})=>t));return{width:this._getMaxContentWidth(this._getElementsWithSize())+(t.right||0)+(t.left||0)+(e.right||0)+this.groupLineWidth,height:this._getTitleSize().height+this._getTopGroupsDistance(o)+(i.bottom||0)+(t.bottom||0)}}_drawTriangle(t){const e=this.x,i=this.y,o={x:e+this.triangleSizes.height,y:i,lineTo:[{x:e,y:i+this.triangleSizes.width/2},{x:e+this.triangleSizes.height,y:i+this.triangleSizes.width}],startY:i,endY:i+this.triangleSizes.width};t&&Object.assign(o,{x:e-this.triangleSizes.height,y:i,lineTo:[{x:e,y:i+this.triangleSizes.width/2},{x:e-this.triangleSizes.height,y:i+this.triangleSizes.width}]}),new x(o.x,o.y,this.color||this.themeForWindow.color,this.ctx,o.lineTo,o.startY,o.endY).draw()}_drawWindow(t,e,i){const o=this._getCoordinates();t&&(o.x-=e+2*this.triangleSizes.height),new s(o.x,o.y,this.color||this.themeForWindow.color,this.ctx,e,i,o.y,o.y+i).draw()}init(){const t=this._outOfBounds(this._getWindowSize().width),{width:e,height:i}=this._getWindowSize();this._drawTriangle(t),this._drawWindow(t,e,i),this._drawTitle(t,e),this._drawGroups(t,e),this._drawLines(t,e)}},f=[{canvas:{background:"#FFFFFF"},title:{color:"#2E2F35"},legend:{color:"#484A53"},axis:{title:{color:"#2E2F35"},point:{color:"#484A53"}},grid:{color:"#EDEDEC"},line:{color:["rgba(178,207,231,0.9)","rgba(178,83,231,0.9)","rgba(93,53,231,0.9)","rgba(80,200,120,0.9)"],fill:[["rgba(178,207,231,0.3)","transparent"],["rgba(178,83,231,0.3)","transparent"],["rgba(93,53,231,0.3)","transparent"],["rgba(80,200,120,0.3)","transparent"]]},cap:{color:["#2A5DA1","#B253E7","#5D35E7","#50C878"],strokeColor:["rgba(178,207,231,0.9)","rgba(178,83,231,0.9)","rgba(93,53,231,0.9)","rgba(80,200,120,0.9)"]},blockInfo:{window:{color:"#101728"},title:{color:"#C2C7D5"},group:{color:"#BBBFCD"}}},{canvas:{background:"#FFFFFF"},title:{color:"#2E2F35"},legend:{color:"#484A53"},axis:{title:{color:"#2E2F35"},point:{color:"#484A53"}},grid:{color:"#EAEAEA"},line:{color:["#82C970","#A5FF8E","#00FF0C","#00800C"],fill:[["rgba(130,201,112,0.3)","transparent"],["rgba(165,255,142,0.3)","transparent"],["rgba(0,255,12,0.3)","transparent"],["rgba(0,128,12,0.3)","transparent"]]},cap:{color:["#82C970","#A5FF8E","#00FF0C","#00800C"],strokeColor:["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"]},blockInfo:{window:{color:"#000000"},title:{color:"#FDFDFD"},group:{color:"#D3D3D3"}}},{canvas:{background:"#F4F5F7"},title:{color:"#2E2F35"},legend:{color:"#484A53"},axis:{title:{color:"#2E2F35"},point:{color:"#484A53"}},grid:{color:"#D2D3D5"},line:{color:["#E49BF7","#4B4F9A","#69D8F4","#F9C366"],fill:[["rgba(228,155,247,0.3)","transparent"],["rgba(75,79,154,0.3)","transparent"],["rgba(105,216,244,0.3)","transparent"],["rgba(249,195,102,0.3)","transparent"]]},cap:{color:["#F4F5F7","#F4F5F7","#F4F5F7","#F4F5F7"],strokeColor:["#E49BF7","#4B4F9A","#69D8F4","#F9C366"]},blockInfo:{window:{color:"#000000"},title:{color:"#FDFDFD"},group:{color:"#D3D3D3"}}},{canvas:{background:"#FFFFFF"},title:{color:"#2E2F35"},legend:{color:"#484A53"},axis:{title:{color:"#2E2F35"},point:{color:"#484A53"}},grid:{color:"#D2D3D5"},line:{color:["#F44133","#9370EE","#39DBFF","#3E51EB"],fill:[["rgba(244,65,51,0.3)","transparent"],["rgba(147,112,238,0.3)","transparent"],["rgba(57,219,255,0.3)","transparent"],["rgba(62,81,235,0.3)","transparent"]]},cap:{color:["#F44133","#9370EE","#39DBFF","#3E51EB"],strokeColor:[]},blockInfo:{window:{color:"#383838"},title:{color:"#FDFDFD"},group:{color:"#D3D3D3"}}},{canvas:{background:"#FEFEFE"},title:{color:"#2E2F35"},legend:{color:"#484A53"},axis:{title:{color:"#2E2F35"},point:{color:"#484A53"}},grid:{color:"#D0D0D0"},line:{color:["rgba(0,156,228,0.7)","rgba(224,1,53,0.9)","rgba(21,212,0,0.9)"],fill:[["rgba(0,156,228,0.3)","transparent"],["rgba(224,1,53,0.3)","transparent"],["rgba(21,212,0,0.3)","transparent"]]},blockInfo:{window:{color:"#E7E7E7"},title:{color:"#2E2F35"},group:{color:"#484A53"}}}],B=[{canvas:{background:"#10143A"},title:{color:"#EBEDFA"},legend:{color:"#9CA1BC"},axis:{title:{color:"#EBEDFA"},point:{color:"#9CA1BC"}},grid:{color:"#070818"},line:{color:["#4C359F","#6285C1","#D37DE7","#318CE7","#50C878"],fill:[["rgba(76,53,159,0.3)","transparent"],["rgba(98,133,193,0.3)","transparent"],["rgba(211,125,231,0.3)","transparent"],["rgba(49,140,231,0.3)","transparent"],["rgba(80,200,120,0.3)","transparent"]]},cap:{color:["#4C359F","#6285C1","#D37DE7","#318CE7","#50C878"],strokeColor:["#10143A","#10143A","#10143A","#10143A","#10143A"]},blockInfo:{window:{color:["#292F4F","#262C50"]},title:{color:"#EBEDFA"},group:{color:"#9CA1BC"}}},{canvas:{background:"#1B1B1B"},title:{color:"#E9E9E9"},legend:{color:"#878A94"},axis:{title:{color:"#E9E9E9"},point:{color:"#878A94"}},grid:{color:"#272727"},line:{color:["#53CA6B","#A93E62","#3344B1","#774CAF"],fill:[["rgba(80,200,120,0.3)","transparent"],["rgba(169,62,98,0.3)","transparent"],["rgba(51,68,177,0.3)","transparent"],["rgba(119,76,175,0.3)","transparent"]]},cap:{color:["#53CA6B","#A93E62","#3344B1","#774CAF"],strokeColor:["#1B1B1B","#1B1B1B","#1B1B1B","#1B1B1B"]},blockInfo:{window:{color:"#070707"},title:{color:"#E9E9E9"},group:{color:"#878A94"}}},{canvas:{background:"#262628"},title:{color:"#FDFDFE"},legend:{color:"#46454B"},axis:{title:{color:"#FDFDFE"},point:{color:"#46454B"}},grid:{color:"#2D2D2D"},line:{color:["#A05663","#608C7B","#488ED5","#D5590D"],fill:[["rgba(160,86,99,0.3)","transparent"],["rgba(96,140,123,0.3)","transparent"],["rgba(72,142,213,0.3)","transparent"],["rgba(213,89,13,0.3)","transparent"]]},cap:{color:["#A05663","#608C7B","#488ED5","#D5590D"],strokeColor:["#262628","#262628","#262628","#262628"]},blockInfo:{window:{color:"#1C1C1E"},title:{color:"#FDFDFE"},group:{color:"#46454B"}}},{canvas:{background:"#212121"},title:{color:"#E5E5E5"},legend:{color:"#696969"},axis:{title:{color:"#E5E5E5"},point:{color:"#696969"}},grid:{color:"#3B3B3B"},line:{color:["#CDE382","#DF5844","#546559","#6D639D"],fill:[["rgba(205,227,130,0.2)","transparent"],["rgba(223,88,68,0.2)","transparent"],["rgba(84,101,89,0.2)","transparent"],["rgba(109,99,157,0.2)","transparent"]]},cap:{color:["#CDE382","#DF5844","#546559","#6D639D"],strokeColor:["#212121","#212121","#212121","#212121"]},blockInfo:{window:{color:"#000000"},title:{color:"#E5E5E5"},group:{color:"#696969"}}},{canvas:{background:"#160D23"},title:{color:"#EDEAEF"},legend:{color:"#4B4162"},axis:{title:{color:"#EDEAEF"},point:{color:"#4B4162"}},grid:{color:"#211732"},line:{color:["#6EFBDD","#F84E82","#5F4591","#71FB88","#FBE471"],fill:[["rgba(67,50,102,0.5)","transparent"],["rgba(248,78,130,0.3)","transparent"],["rgba(95,69,145,0.3)","transparent"],["rgba(113,251,136,0.3)","transparent"],["rgba(251,228,113,0.3)","transparent"]]},cap:{color:["#6EFBDD","#F84E82","#5F4591","#71FB88","#FBE471"],strokeColor:[]},blockInfo:{window:{color:"#000000"},title:{color:"#EDEAEF"},group:{color:"#4B4162"}}},{canvas:{background:"#371F67"},title:{color:"#DAC6FF"},legend:{color:"#836FAB"},axis:{title:{color:"#DAC6FF"},point:{color:"#836FAB"}},grid:{color:"#4B316B"},line:{color:["#9F3F7D","#6FA1CD","#E7877B","#F6488A"],fill:[["rgba(159,63,125,0.5)","transparent"],["rgba(111,161,205,0.5)","transparent"],["rgba(231,135,123,0.5)","transparent"],["rgba(246,72,138,0.5)","transparent"]]},cap:{color:["#9F3F7D","#6FA1CD","#E7877B","#F6488A"],strokeColor:["#371F67","#371F67","#371F67","#371F67"]},blockInfo:{window:{color:"#DAC6FF"},title:{color:"#4B316B"},group:{color:"#836FAB"}}},{canvas:{background:"#2A2C3B"},title:{color:"#CCCCD8"},legend:{color:"#7C7E83"},axis:{title:{color:"#CCCCD8"},point:{color:"#7C7E83"}},grid:{color:"#3E4156"},line:{color:["#369F8F","#2D6685","#E48667","#B25E8C","#E3E77B"],fill:[["rgba(54,159,143,0.3)","transparent"],["rgba(45,102,133,0.3)","transparent"],["rgba(228,134,103,0.3)","transparent"],["rgba(178,94,140,0.3)","transparent"],["rgba(227,231,123,0.3)","transparent"]]},cap:{color:["#369F8F","#2D6685","#E48667","#B25E8C","#E3E77B"],strokeColor:["#2A2C3B","#2A2C3B","#2A2C3B","#2A2C3B","#2A2C3B"]},blockInfo:{window:{color:"#29384B"},title:{color:"#CCCCD8"},group:{color:"#7C7E83"}}},{canvas:{background:"#22252A"},title:{color:"#88AFB4"},legend:{color:"#317375"},axis:{title:{color:"#88AFB4"},point:{color:"#317375"}},grid:{color:"#33373E"},line:{color:["#11B8BF","#2C5A61","#99FFFF"],fill:[["rgba(17,184,191,0.3)","transparent"],["rgba(44,90,97,0.3)","transparent"],["rgba(153,255,255,0.3)","transparent"]]},cap:{color:["#11B8BF","#2C5A61","#99FFFF"],strokeColor:[]},blockInfo:{window:{color:"#121418"},title:{color:"#88AFB4"},group:{color:"#317375"}}},{canvas:{background:"#2F3245"},title:{color:"#D7D9E8"},legend:{color:"#828598"},axis:{title:{color:"#D7D9E8"},point:{color:"#828598"}},grid:{color:"#373B4C"},line:{color:["#D4D68A","#60AFA6","#5A7DCF","#D580E7"],fill:[["rgba(212,214,138,0.3)","transparent"],["rgba(96,175,166,0.3)","transparent"],["rgba(90,125,207,0.3)","transparent"],["rgba(213,128,231,0.3)","transparent"]]},cap:{color:["#D4D68A","#60AFA6","#5A7DCF","#D580E7"],strokeColor:["#2F3245","#2F3245","#2F3245","#2F3245"]},blockInfo:{window:{color:"#262938"},title:{color:"#D7D9E8"},group:{color:"#828598"}}},{canvas:{background:"#3C4256"},title:{color:"#FFF4F7"},legend:{color:"#B3B7BE"},axis:{title:{color:"#FFF4F7"},point:{color:"#B3B7BE"}},grid:{color:"#4C5061"},line:{color:["#FCFFFF","#85EDFF","#FC8EFF"],fill:[["rgba(252,255,255,0.3)","transparent"],["rgba(133,237,255,0.3)","transparent"],["rgba(252,142,255,0.3)","transparent"]]},cap:{color:["#B3B7BE","#A6F2FF","#FDBBFF"],strokeColor:["#FCFFFF","#85EDFF","#FC8EFF"]},blockInfo:{window:{color:"#2D303E"},title:{color:"#FFF4F7"},group:{color:"#B3B7BE"}}},{canvas:{background:"#3D404F"},title:{color:"#E1E1F0"},legend:{color:"#C8C8D5"},axis:{title:{color:"#E1E1F0"},point:{color:"#C8C8D5"}},grid:{color:"#484B5A"},line:{color:["#6CB1F8","#F7D076","#E9945A","#CFD4DA"]},cap:{color:["#6CB1F8","#F7D076","#E9945A","#CFD4DA"]},blockInfo:{window:{color:"#2D303E"},title:{color:"#E1E1F0"},group:{color:"#C8C8D5"}}},{canvas:{background:"#1F212E"},title:{color:"#C6CFE4"},legend:{color:"#747985"},axis:{title:{color:"#C6CFE4"},point:{color:"#747985"}},grid:{color:"#2D2F3C"},line:{color:["#D188F5","#3E99E8","#9244E9","#EDDFF6"],fill:[["rgba(229,181,239,0.3)","transparent"],["rgba(77,132,236,0.3)","transparent"],["rgba(146,68,233,0.3)","transparent"],["rgba(237,223,246,0.3)","transparent"]]},cap:{color:["#D188F5","#3E99E8","#9244E9","#EDDFF6"],strokeColor:["#1F212E","#1F212E","#1F212E","#1F212E"]},blockInfo:{window:{color:"#0F111E"},title:{color:"#C6CFE4"},group:{color:"#747985"}}},{canvas:{background:"#171717"},title:{color:"#D9D9D9"},legend:{color:"#BBBBBB"},axis:{title:{color:"#D9D9D9"},point:{color:"#BBBBBB"}},grid:{color:"#2C2C2C"},line:{color:["#C46BD1","#8157E3","#74E8BD","#FCB72A"],fill:[["rgba(196,107,209,0.3)","transparent"],["rgba(129,87,227,0.3)","transparent"],["rgba(116,232,189,0.3)","transparent"],["rgba(252,183,42,0.3)","transparent"]]},cap:{color:["#C46BD1","#8157E3","#74E8BD","#FCB72A"],strokeColor:["#171717","#171717","#171717","#171717"]},blockInfo:{window:{color:"#000000"},title:{color:"#D9D9D9"},group:{color:"#BBBBBB"}}},{canvas:{background:"#2A2430"},title:{color:"#C8C0D0"},legend:{color:"#938D99"},axis:{title:{color:"#C8C0D0"},point:{color:"#938D99"}},grid:{color:"#38323E"},line:{color:["#0FE5F3","#138CED","#E548E3","#5A4DD3","#4DD35A"],fill:[["rgba(15,229,243,0.3)","transparent"],["rgba(19,140,237,0.3)","transparent"],["rgba(229,72,227,0.3)","transparent"],["rgba(90,77,211,0.3)","transparent"],["rgba(77,211,90,0.3)","transparent"]]},cap:{color:["#0FE5F3","#138CED","#E548E3","#5A4DD3","#4DD35A"],strokeColor:["#2A2430","#2A2430","#2A2430","#2A2430","#2A2430"]},blockInfo:{window:{color:"#100D12"},title:{color:"#C8C0D0"},group:{color:"#938D99"}}},{canvas:{background:"#383B4A"},title:{color:"#DBD9E6"},legend:{color:"#C3C2CD"},axis:{title:{color:"#DBD9E6"},point:{color:"#C3C2CD"}},grid:{color:"#5C6177"},line:{color:["#52CFE7","#1E77E0","#EA9F41","#0A8792","#94398C"],fill:[["rgba(82,207,231,0.3)","transparent"],["rgba(30,119,224,0.3)","transparent"],["rgba(234,159,65,0.3)","transparent"],["rgba(10,135,146,0.3)","transparent"],["rgba(148,57,140,0.3)","transparent"]]},cap:{color:["#52CFE7","#1E77E0","#EA9F41","#0A8792","#94398C"],strokeColor:["#383B4A","#383B4A","#383B4A","#383B4A","#383B4A"]},blockInfo:{window:{color:"#343746"},title:{color:"#DBD9E6"},group:{color:"#C3C2CD"}}},{canvas:{background:"#130F14"},title:{color:"#ADADB2"},legend:{color:"#8A8A8E"},axis:{title:{color:"#ADADB2"},point:{color:"#8A8A8E"}},grid:{color:"#2C2E38"},line:{color:["#A62D33","#56A249","#DBBD55","#0A8792","#863CB0"],fill:[["rgba(166,45,51,0.3)","transparent"],["rgba(86,162,73,0.3)","transparent"],["rgba(234,159,65,0.3)","transparent"],["rgba(10,135,146,0.3)","transparent"],["rgba(134,60,176,0.3)","transparent"]]},cap:{color:["#A62D33","#56A249","#DBBD55","#0A8792","#863CB0"],strokeColor:["#130F14","#130F14","#130F14","#130F14","#130F14"]},blockInfo:{window:{color:"#050506"},title:{color:"#ADADB2"},group:{color:"#8A8A8E"}}},{canvas:{background:"#212338"},title:{color:"#97B7BF"},legend:{color:"#7F99A0"},axis:{title:{color:"#97B7BF"},point:{color:"#7F99A0"}},grid:{color:"#40435C"},line:{color:["#FB6F74","#F2A652","#CB4C8C","#17C5CB","#25F6B4"],fill:[["rgba(251,111,116,0.3)","transparent"],["rgba(242,166,82,0.3)","transparent"],["rgba(203,76,140,0.3)","transparent"],["rgba(23,197,203,0.3)","transparent"],["rgba(37,246,180,0.3)","transparent"]]},cap:{color:["#FB6F74","#F2A652","#CB4C8C","#17C5CB","#25F6B4"],strokeColor:["#212338","#212338","#212338","#212338","#212338"]},blockInfo:{window:{color:"#171827"},title:{color:"#97B7BF"},group:{color:"#7F99A0"}}},{canvas:{background:"#0E0A01"},title:{color:"#C4B5D0"},legend:{color:"#9F93A9"},axis:{title:{color:"#C4B5D0"},point:{color:"#9F93A9"}},grid:{color:"#1B100D"},line:{color:["#7C51AB","#AAA8A9","#C89DFA"],fill:[["rgba(124,81,171,0.3)","transparent"],["rgba(170,168,169,0.3)","transparent"],["rgba(200,157,250,0.3)","transparent"]]},cap:{color:["#7C51AB","#AAA8A9","#C89DFA"],strokeColor:["#0E0A01","#0E0A01","#0E0A01"]},blockInfo:{window:{color:"#000000"},title:{color:"#C4B5D0"},group:{color:"#9F93A9"}}},{canvas:{background:"#000000"},title:{color:"#C5C5C5"},legend:{color:"#ACACAC"},axis:{title:{color:"#C5C5C5"},point:{color:"#ACACAC"}},grid:{color:"#1E1E1E"},line:{color:["#FC1819","#FFF2F0","#333532","#C0BFC0","#99342F"],fill:[["rgba(252,24,25,0.3)","transparent"],["rgba(255,242,240,0.3)","transparent"],["rgba(51,53,50,0.3)","transparent"],["rgba(192,191,192,0.3)","transparent"],["rgba(153,52,47,0.3)","transparent"]]},cap:{color:["#FC1819","#FFF2F0","#333532","#C0BFC0","#99342F"],strokeColor:["#000000","#000000","#000000","#000000","#000000"]},blockInfo:{window:{color:"#1E1E1E"},title:{color:"#C5C5C5"},group:{color:"#ACACAC"}}},{canvas:{background:"#193565"},title:{color:"#E7EDFF"},legend:{color:"#CCD1E1"},axis:{title:{color:"#E7EDFF"},point:{color:"#CCD1E1"}},grid:{color:"#102241"},line:{color:["#9E51D0","#6485E2","#01A8D0","#0154CE"],fill:[["rgba(158,81,208,0.3)","transparent"],["rgba(100,133,226,0.3)","transparent"],["rgba(1,168,208,0.3)","transparent"],["rgba(1,84,206,0.3)","transparent"]]},cap:{color:["#9E51D0","#6485E2","#01A8D0","#0154CE"],strokeColor:["#193565","#193565","#193565","#193565"]},blockInfo:{window:{color:["#0A1427","#152D56"]},title:{color:"#E7EDFF"},group:{color:"#CCD1E1"}}},{canvas:{background:"#211E3D"},title:{color:"#FDFEF8"},legend:{color:"#D5D6D1"},axis:{title:{color:"#FDFEF8"},point:{color:"#D5D6D1"}},grid:{color:"#373356"},line:{color:["#F326A3","#9153F4","#F2A543","#FFFCFF"],fill:[["rgba(243,38,163,0.3)","transparent"],["rgba(145,83,244,0.3)","transparent"],["rgba(242,165,67,0.3)","transparent"],["rgba(255,252,255,0.3)","transparent"]]},cap:{color:["#F326A3","#9153F4","#F2A543","#FFFCFF"],strokeColor:["#211E3D","#211E3D","#211E3D","#211E3D"]},blockInfo:{window:{color:["#121021","#151327"]},title:{color:"#FDFEF8"},group:{color:"#D5D6D1"}}},{canvas:{background:"#09284B"},title:{color:"#F4F8FD"},legend:{color:"#C3C6CA"},axis:{title:{color:"#F4F8FD"},point:{color:"#C3C6CA"}},grid:{color:"#0B3F74"},line:{color:["#FB917E","#14C0D3","#7659E5","#C64264","#148B73"],fill:[["rgba(251,145,126,0.3)","transparent"],["rgba(20,192,211,0.3)","transparent"],["rgba(118,89,229,0.3)","transparent"],["rgba(198,66,100,0.3)","transparent"],["rgba(20,139,115,0.3)","transparent"]]},cap:{color:["#FB917E","#14C0D3","#7659E5","#C64264","#148B73"],strokeColor:["#09284B","#09284B","#09284B","#09284B","#09284B"]},blockInfo:{window:{color:"#030F1B"},title:{color:"#F4F8FD"},group:{color:"#C3C6CA"}}},{canvas:{background:"#474A5B"},title:{color:"#CADBFF"},legend:{color:"#94A0BB"},axis:{title:{color:"#CADBFF"},point:{color:"#94A0BB"}},grid:{color:"#777B8E"},line:{color:["#1A78F5","#74C278","#CD4560","#C5F664","#36DED3"],fill:[["rgba(26,120,245,0.3)","transparent"],["rgba(116,194,120,0.3)","transparent"],["rgba(205,69,96,0.3)","transparent"],["rgba(197,246,100,0.3)","transparent"],["rgba(54,222,211,0.3)","transparent"]]},cap:{color:["#474A5B","#474A5B","#474A5B","#474A5B","#474A5B"],strokeColor:["#1A78F5","#74C278","#CD4560","#C5F664","#36DED3"]},blockInfo:{window:{color:"#292B35"},title:{color:"#CADBFF"},group:{color:"#94A0BB"}}},{canvas:{background:"#201F25"},title:{color:"#F8F9F8"},legend:{color:"#CFD0CF"},axis:{title:{color:"#F8F9F8"},point:{color:"#CFD0CF"}},grid:{color:"#36393E"},line:{color:["#C75770","#C7002B","#FF0037","#710037"],fill:[["rgba(199,87,112,0.3)","transparent"],["rgba(199,0,43,0.3)","transparent"],["rgba(255,0,55,0.3)","transparent"],["rgba(113,0,55,0.3)","transparent"]]},cap:{color:["#201F25","#201F25","#201F25","#201F25"],strokeColor:["#C75770","#C7002B","#FF0037","#710037"]},blockInfo:{window:{color:"#080809"},title:{color:"#F8F9F8"},group:{color:"#CFD0CF"}}},{canvas:{background:"#36446B"},title:{color:"#F1F4F8"},legend:{color:"#C7CACD"},axis:{title:{color:"#F1F4F8"},point:{color:"#C7CACD"}},grid:{color:"#4E629A"},line:{color:["#358CBE","#35B59D","#5462DD","#8862DD"],fill:[["rgba(53,140,190,0.3)","transparent"],["rgba(53,181,157,0.3)","transparent"],["rgba(84,98,221,0.3)","transparent"],["rgba(136,98,221,0.3)","transparent"]]},cap:{color:["#36446B","#36446B","#36446B","#36446B"],strokeColor:["#358CBE","#35B59D","#5462DD","#8862DD"]},blockInfo:{window:{color:"#1D2438"},title:{color:"#F1F4F8"},group:{color:"#C7CACD"}}}],A=(t,e=1)=>`rgba(${t},${e})`,E={white:t=>A("255,255,255",t),whiteSmoke:t=>A("245,245,245",t),antiFlashWhite:t=>A("235,235,235",t),platinum:t=>A("224,224,224",t),timberwolf:t=>A("214,214,214",t),silver:t=>A("204,204,204",t),bistre:t=>A("204,204,204",t),black:t=>A("0,0,0",t),blackBean:t=>A("61,12,2",t),blackOlive:t=>A("59,60,54",t),cafeNoir:t=>A("75,54,33",t),charcoal:t=>A("54,69,79",t),darkPurple:t=>A("48,25,52",t),ebony:t=>A("85,93,80",t),eclipse:t=>A("0,0,32",t),eerieBlack:t=>A("27,27,27",t),jet:t=>A("52,52,52",t),licorice:t=>A("26,17,16",t),midnight:t=>A("0,0,64",t),night:t=>A("17,17,17",t),onyx:t=>A("53,56,57",t),outerSpace:t=>A("65,74,76",t),raisinBlack:t=>A("36,33,36",t),richBlack:t=>A("1,11,19",t),russianViolet:t=>A("50,23,77",t),smokyBlack:t=>A("16,12,8",t),taupe:t=>A("72,60,50",t),indianRed:t=>A("205,92,92",t),lightCoral:t=>A("240,128,128",t),salmon:t=>A("250,128,114",t),darkSalmon:t=>A("233,150,122",t),lightSalmon:t=>A("255,160,122",t),crimson:t=>A("220,20,60",t),red:t=>A("255,0,0",t),fireBrick:t=>A("178,34,3",t),darkRed:t=>A("139,0,0",t),pink:t=>A("255,192,203",t),lightPink:t=>A("255,182,193",t),hotPink:t=>A("255,105,180",t),deepPink:t=>A("255,20,147",t),mediumVioletRed:t=>A("199,21,133",t),paleVioletRed:t=>A("219,112,147",t),coral:t=>A("255,127,8",t),tomato:t=>A("255,99,7",t),orangeRed:t=>A("255,69,0",t),darkOrange:t=>A("255,140,0",t),orange:t=>A("255,165,0",t),gold:t=>A("255,215,0",t),yellow:t=>A("255,255,0",t),lightYellow:t=>A("255,255,224",t),lemonChiffon:t=>A("255,250,205",t),lightGoldenrodYellow:t=>A("250,250,210",t),papayaWhip:t=>A("255,239,213",t),moccasin:t=>A("255,228,181",t),peachPuff:t=>A("255,218,185",t),paleGoldenrod:t=>A("238,232,170",t),khaki:t=>A("240,230,140",t),darkKhaki:t=>A("189,183,107",t),lavender:t=>A("230,230,250",t),thistle:t=>A("216,191,216",t),plum:t=>A("221,160,221",t),violet:t=>A("238,130,238",t),orchid:t=>A("218,112,214",t),fuchsia:t=>A("255,0,255",t),magenta:t=>A("255,0,255",t),mediumOrchid:t=>A("186,85,211",t),mediumPurple:t=>A("147,112,219",t),rebeccaPurple:t=>A("102,51,153",t),blueViolet:t=>A("138,43,226",t),darkViolet:t=>A("148,0,211",t),darkOrchid:t=>A("153,50,204",t),darkMagenta:t=>A("139,0,139",t),purple:t=>A("128,0,128",t),indigo:t=>A("75,0,130",t),slateBlue:t=>A("106,90,205",t),darkSlateBlue:t=>A("72,61,139",t),mediumSlateBlue:t=>A("123,104,238",t),greenYellow:t=>A("173,255,47",t),chartreuse:t=>A("127,255,0",t),lawnGreen:t=>A("124,252,0",t),lime:t=>A("0,255,0",t),limeGreen:t=>A("50,205,50",t),paleGreen:t=>A("152,251,152",t),lightGreen:t=>A("144,238,144",t),mediumSpringGreen:t=>A("0,250,154",t),springGreen:t=>A("0,255,127",t),mediumSeaGreen:t=>A("60,179,113",t),seaGreen:t=>A("46,139,87",t),forestGreen:t=>A("34,139,34",t),green:t=>A("0,128,0",t),darkGreen:t=>A("0,100,0",t),yellowGreen:t=>A("154,205,50",t),oliveDrab:t=>A("107,142,35",t),olive:t=>A("128,128,0",t),darkOliveGreen:t=>A("85,107,47",t),mediumAquamarine:t=>A("102,205,170",t),darkSeaGreen:t=>A("143,188,139",t),lightSeaGreen:t=>A("32,178,170",t),darkCyan:t=>A("0,139,139",t),teal:t=>A("0,128,128",t)},y=class{constructor(){this.themes={dark:B,light:f},this.colors=E}getTheme(t=0,e="dark"){return this.themes[e]&&this.themes[e][t]?this.themes[e][t]:{}}getColor(t,e=1){return this.colors[t]instanceof Function?this.colors[t](e):""}};class k{constructor({selectorCanvas:t,background:e,type:i,title:o={},theme:s={},data:r={},axisY:n={},axisX:a={},line:l={},cap:h={},grid:c={},legend:g={},blockInfo:d={},padding:p={top:10,left:10,right:10,bottom:10}}){this.padding=p,this.cap=h,this.legend=g,this.type=i||"line",this.grid=c,this.line=l,this.axisY=n,this.axisX=a,this.title=o,this.background=e,this.selectorCanvas=t,this.blockInfo=d,this.data=r,this.theme=s,this.hideGroups=[]}_setCanvas(){return new class{constructor(t,e,i={}){this.canvasElement=document.querySelector(t),this.background=e,this.ctx=this.canvasElement.getContext("2d"),this.theme=i}_setDefaultStyles(){const{offsetWidth:t,offsetHeight:e}=this.canvasElement,i={display:"block",boxSizing:"border-box"};this.canvasElement.width=t,this.canvasElement.height=e,this.canvasElement.setAttribute("style",Object.keys(i).map((t=>`${t}:${i[t]}`)).join(";"))}getSizes(){const{width:t,height:e}=this.canvasElement;return{width:t,height:e}}_setBackground(){const t=this.background||this.theme.background,{width:e,height:i}=this.getSizes();new s(0,0,t,this.ctx,e,i,0,i).draw()}init(){return this._setDefaultStyles(),this._setBackground(),this}}(this.selectorCanvas,this.background,this.theme.canvas).init()}_setChartTitle(t){const{width:e,height:i}=t.getSizes();return new h(this.padding,this.data,t.ctx,e,i,this.type,this.title,this.theme.title).drawTitle()}_setLegend(t,e){const{font:i,circle:o,gaps:s,maxCount:n}=this.legend,h=Boolean(Object.keys(this.legend).length),c=e.getGapsForLegend(this.axisY,e.titleData);return new class{constructor(t,e,i,o,s,r,n,a,l={},h=4,c={},g={}){this.hideGroups=a,this.showLegend=t,this.line=i,this.font=r,this.data=e,this.ctx=o,this.bounds=s,this.circle=n,this.maxCount=h>0?h:4,this.legendGaps=l,this.totalHeight=0,this.themeForText=c,this.themeForCircle=g,this.items=[]}_getSizeGroups(t){const{size:e,weight:i=400}=this.font;return t.map((t=>{const o=l(e,i,t.group,this.ctx);return Object.assign(Object.assign(Object.assign({},o),t),{x:null,y:null})}))}_getDistanceGroups(t){if(!t.length)return 0;const{group:e={},circle:i={right:null}}=this.legendGaps,{radius:o}=this.circle;return t.reduce(((t,{width:s})=>t+(s+(e.right||0)+2*o+(i.right||0))),0)}_getTopDistanceGroups(t){if(!t.length)return 0;const{group:e={}}=this.legendGaps,{height:i}=t[0];return(e.bottom||0)+i}_getColumns(){const t=[],e=Object.keys(this.data);for(let i=0;i<e.length;i+=this.maxCount){const o=e.map((t=>Object.assign(Object.assign({},this.data[t]),{group:t}))).slice(i,i+this.maxCount).map((({group:t,line:i={}})=>{const o=e.indexOf(t),s=C(o,this.themeForCircle.color);return{group:t,color:i.color||(this.line||{}).color||i.fill||(this.line||{}).fill||s}}));t.push(o)}return t}_drawText(t,e,i,o,s,n){const l=this.bounds,h=l.width/2,c=this._getDistanceGroups(o),{size:g,weight:d=400,color:u=this.themeForText.color}=this.font,F={size:g,color:u,str:a(g,d),text:t},x=o.filter(((t,e)=>e<s)),b={x:l.horizontal.start+(n.left||0)+h-c/2+this._getDistanceGroups(x),y:l.vertical.start+(n.top||0)+i};if(new r(F,this.ctx,b.x,b.y).draw(),this.hideGroups.includes(t)){const t=e+b.x,o=b.y-i/2;new p(b.x,o,u,this.ctx,[{x:t,y:o}],2).draw()}return b}_drawCircle(t,e,i,o){const{radius:s}=this.circle,{circle:r={right:null}}=this.legendGaps,n={x:t-s-(r.right||0),y:e-Math.max(s,i/2)};new u(s,n.x,n.y,o,this.ctx,1,n.y-s,n.y+s).draw()}_getDistanceTopFromPrevColumns(t,e){return t.filter(((t,i)=>i<e)).reduce(((t,e)=>t+this._getTopDistanceGroups(this._getSizeGroups(e))),0)}draw(t){if(!this.showLegend)return this;const e=this._getColumns();return e.map(((i,o)=>{const s=this._getSizeGroups(i),r=this._getDistanceTopFromPrevColumns(e,o);s.map((({group:e,color:i,height:o,width:n},a)=>{const l=this._drawText(e,n,o,s,a,Object.assign(Object.assign({},t),{top:t.top+r}));this.items.push(Object.assign(Object.assign({group:e},l),{height:o,width:n,color:i})),this._drawCircle(l.x,l.y,o,i)})),this.totalHeight+=this._getTopDistanceGroups(s)})),this}}(h,this.data,this.line,t.ctx,e.getBounds(),i,o,this.hideGroups,s,n,this.theme.legend,this.theme.line).draw(c)}_setAxisYTitle(t,e,i){const{step:o,editValue:s,title:r,font:n,sort:a}=this.axisY,l=(this.theme.axis||{}).title,h=(this.theme.axis||{}).point,c=e.getGapsForYTitle(e.titleData,Object.assign(Object.assign({},i),this.legend),this.axisX);return new d(s,this.data,t.ctx,r,e.getBounds(),n,this.axisX.sort,l,h,a,o).drawTitle(c)}_setAxisXTitle(t,e,i){const{font:o,editName:s,sort:r,ignoreNames:n,title:a,rotate:l}=this.axisX,h=(this.theme.axis||{}).title,c=(this.theme.axis||{}).point,g=this.theme.line,d=e.getGapsForXTitle(i);return new D(t.ctx,this.data,this.line,a,e.getBounds(),o,s,r,l,h,c,n,g).drawTitle(d)}_setPoints(t,e,i,o){const s=t.drawPoints(o.getGapsForYPoints(t,e,o.titleData,Object.assign(Object.assign({},this.legend),i))),r=e.drawPoints(o.getGapsForXPoints(t,e));return{pointsY:s.points,pointsX:r.points}}_setGrid(t,e,i){const{line:o,format:s,background:r}=this.grid;return new class{constructor(t,e,i,o,s,r,n,a={},l={}){this.maxPointYWidth=i,this.names=e,this.ctx=t,this.pointsY=o.points,this.pointsX=s.points,this.showPointsX=s.font.showText,this.showPointsY=o.font.showText,this.line=a,this.format=n||"default",this.theme=l,this.background=r,this.distanceBetweenLineAndPoint=5}_getPointsOnScreen(t){return t.filter((({onScreen:t})=>t))}_drawBackground(){if(!this.background)return;const t=this._getPointsOnScreen(this.pointsY),e=this._getPointsOnScreen(this.pointsX),{x:i}=e[0],{y:o}=t[0],{x:s}=e[e.length-1],{y:r}=t[t.length-1];new x(i,o,this.background,this.ctx,[{x:s,y:o},{x:s,y:r},{x:i,y:r},{x:i,y:o}],o,r).draw()}_drawHorizontalLines(t){const{width:e,dotted:i,stretch:o}=this.line,s=this._getPointsOnScreen(this.pointsY),{x:r}=this.pointsX[0],{x:n}=this.pointsX[this.pointsX.length-1],a=o&&this.showPointsY;s.map((({y:o,x:s})=>{new p(a?s+this.maxPointYWidth+this.distanceBetweenLineAndPoint:r,o,t,this.ctx,[{x:n,y:o}],e,i).draw()}))}_drawVerticalLines(t){const{width:e,dotted:i,stretch:o}=this.line,s=this._getPointsOnScreen(this.pointsY),r=this._getPointsOnScreen(this.pointsX),{y:n}=s[0],{y:a}=r[r.length-1],{y:l}=s[s.length-1];this.names.map((s=>{const{x:h,height:c}=this.pointsX.find((t=>t.name===s)),g=Boolean(r.find((t=>t.name===s))),d=o&&g&&this.showPointsX;new p(h,n,t,this.ctx,[{x:h,y:d?a-(c+this.distanceBetweenLineAndPoint):l}],e,i).draw()}))}init(){if(!Object.keys(this.line).length)return;this._drawBackground();const t=this.line.color||this.theme.color;switch(this.format){case"horizontal":this._drawHorizontalLines(t);break;case"vertical":this._drawVerticalLines(t);break;default:this._drawVerticalLines(t),this._drawHorizontalLines(t)}return this}}(t.ctx,i.getAxesData(this.data).names,i.getMaxTextWidthAtYAxis(),i,e,r,s,o,this.theme.grid).init()}_windowResizeHandler(){this.update()}_windowResize(){window.addEventListener("resize",this._windowResizeHandler.bind(this))}_mousemoveByCanvasHandler(t,e,i,o,s,r){const n={x:t.offsetX,y:t.offsetY};if(n.y<=e&&n.y>=o){const t=i.map((t=>this.axisX.editName instanceof Function?Object.assign(Object.assign({},t),{name:this.axisX.editName(t.name)}):t)).filter((({x:t,group:e})=>!this.hideGroups.includes(e)&&n.x>t-5&&n.x<t+5));if(document.documentElement.setAttribute("style","cursor: "+(t.length?"none":"default")),t.length){this.update();const[{x:e}]=t,{title:i,groups:o,background:a,padding:l}=this.blockInfo,h=(this.theme.blockInfo||{}).window,c=this.theme.line,g=(this.theme.blockInfo||{}).title,d=(this.theme.blockInfo||{}).group;new w(this.axisY.editValue,this.axisX.editName,this.data,r,t,i,o,e,n.y,a,s.ctx,l,h,c,g,d).init()}}else document.documentElement.setAttribute("style","cursor: default")}_mousemoveByCanvas(t,e,{pointsX:i,pointsY:o}){if(!Object.keys(this.blockInfo).length)return;const s=o.filter((({onScreen:t})=>t)),{y:r,height:n}=s[0],{y:a,height:l}=s[s.length-1],h=a-n/2,c=r-l/2;t.canvasElement.addEventListener("mousemove",(o=>this._mousemoveByCanvasHandler(o,h,i,c,t,e)))}_leavemouseFromCanvasAreaHandler(){document.documentElement.setAttribute("style","default"),this.update()}_leavemouseFromCanvasArea(t){t.canvasElement.addEventListener("mouseleave",this._leavemouseFromCanvasAreaHandler.bind(this))}_clickByCanvasAreaHandler(t,e){const i=t.offsetX,o=t.offsetY,s=e.find((({x:t,y:e,width:s,height:r})=>i<=t+s&&i>=t&&o<=e&&o>=e-r));if(s){const{group:t}=s,e=this.hideGroups.indexOf(t);-1!==e?this.hideGroups.splice(e,1):this.hideGroups.push(t),this.update()}}_clickByCanvasArea(t,e){t.canvasElement.addEventListener("click",(t=>this._clickByCanvasAreaHandler(t,e)))}_drawChartByType(t,e,i){const{width:o,height:s}=i.getSizes();"line"===this.type&&new m(this.data,this.line,this.cap,t.points,e.points,i.ctx,o,s,null,null,this.hideGroups,this.axisY.sort,this.theme.line,this.theme.cap).draw()}update(){const t=this._setCanvas(),e=this._setChartTitle(t),i=this._setLegend(t,e),o=this._setAxisYTitle(t,e,i),s=this._setAxisXTitle(t,e,o);return this._setPoints(o,s,i,e),this._setGrid(t,s,o),this._drawChartByType(o,s,t),this}init(){const t=this._setCanvas(),e=this._setChartTitle(t),i=this._setLegend(t,e),o=this._setAxisYTitle(t,e,i),s=this._setAxisXTitle(t,e,o),r=this._setPoints(o,s,i,e);return this._mousemoveByCanvas(t,e.getBounds(),r),this._leavemouseFromCanvasArea(t),this._clickByCanvasArea(t,i.items),this._setGrid(t,s,o),this._drawChartByType(o,s,t),this._windowResize(),this}}return e})()));